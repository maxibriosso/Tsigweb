<!doctype html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="http://openlayers.org/en/v3.1.1/css/ol.css" type="text/css">
	<style>
		   .map {
        height: 500px;
        width: 600px;
        border:solid 1px;
      }
     
      
		 
    </style>
    <script src="http://www.openlayers.org/api/2.11/OpenLayers.js"></script>
    <title>OpenLayers 3 example</title>
    
    
    <script type="text/javascript">
    
    
    var map;
    var wms;
    

    
    
    var bounds = new OpenLayers.Bounds(366582.582,6127927,858252.252,6671738);
    
    var map_controls = [
                         new OpenLayers.Control.PanZoomBar(), 
                         new OpenLayers.Control.MouseToolbar(),
                         
                         ];
	var mapoptions = 
		{ 
			
			
			units: 'm',
			projection: "EPSG:32721",
			maxExtent:bounds ,
			center: new OpenLayers.LonLat(574553.537,6141267.75),
			maxResolution: 1000
			
			
	    };
	
	function init() {
		
	
		     map = new OpenLayers.Map('map', mapoptions);            
		            // setup tiled layer
		           var tiled = new OpenLayers.Layer.WMS(
		        		   
                "mapabase", "http://localhost:8080/geoserver/sige/wms",
                {LAYERS: 'sige:mapabase',projection: new OpenLayers.Projection('EPSG:32721')}
                            
            );

		         
		            
		       
		           var wfs = new OpenLayers.Layer.WFS(
		                    "ejes",
		                    "http://localhost:8080/geoserver/wfs",
		                    {typename: 'sige:ejes'},
		                    {
		                            version: "1.1.0",
		                            srsName: "EPSG:32721",
		                            typename: 'ejes',
		                            featureNS: "localhost:8080/geoserver/sige",
		                            extractAttributes: false,
		                            geometryName: "geom" // field in Feature Type details with type "Geometry"
		                            
		                       
		                    
		                    });
		           
		           var wfs2 = new OpenLayers.Layer.WFS(
		        		   "ejes1",
		                    "http://localhost:8080/geoserver/wfs",
		                    {typename: 'sige:ejes1'},
		                    {
		                            version: "1.1.0",
		                            srsName: "EPSG:32721",
		                            typename: 'ejes1',
		                            featureNS: "localhost:8080/geoserver/sige",
		                            extractAttributes: false,
		                            geometryName: "geom" // field in Feature Type details with type "Geometry"
		                            
		         
		                    
		                    });
		           wfs2.style = OpenLayers.Util.applyDefaults({strokeColor: "#ff0000"}, 
		                    OpenLayers.Feature.Vector.style["default"]);

		           
		           var puntos = new OpenLayers.Layer.WFS(
		                    "puntos",
		                    "http://localhost:8080/geoserver/wfs",
		                    {typename: 'sige:puntos'},
		                    {
	                                version: "1.1.0",
		                            srsName: "EPSG:32721",
		                            typename: 'puntos',
		                            featureNS: "localhost:8080/geoserver/sige",
		                            extractAttributes: false,
		                            geometryName: "geom" // field in Feature Type details with type "Geometry"
		                            
		                      
		                    
		                    });
		           
		           puntos.style = OpenLayers.Util.applyDefaults({strokeColor: "#0000ff"}, 
		                    OpenLayers.Feature.Vector.style["default"]);
		       
		           map.addLayers([tiled, wfs,wfs2,puntos]);
		           
		           var panel = new OpenLayers.Control.Panel(
		                   {displayClass: 'olControlEditingToolbar'}
		               );
		           var drawLine = new OpenLayers.Control.DrawFeature(
		        		   wfs2, OpenLayers.Handler.Path,
		                   {displayClass: 'olControlDrawFeaturePath'}
		               );
		               drawLine.featureAdded = function(feature) {
		                   feature.layer.eraseFeatures([feature]);
		                   // cast to multilinestring
		                   feature.geometry = new OpenLayers.Geometry.MultiLineString(
		                       feature.geometry
		                   );
		                   feature.style.strokeColor = "#ff0000";
		                   feature.state = OpenLayers.State.Insert;
		                   feature.layer.drawFeature(feature);
		               }
		               var drawPoint = new OpenLayers.Control.DrawFeature(
		            		   puntos, OpenLayers.Handler.Point,
		                       {displayClass: 'olControlDrawFeaturePoint'}
		                   );
		                   drawPoint.featureAdded = function(feature) {
		                       feature.layer.eraseFeatures([feature]);
		                       // cast to multipoint
		                       feature.geometry = new OpenLayers.Geometry.MultiPoint(
		                           feature.geometry
		                       );
		                       feature.style.strokeColor = "#0000ff";
		                       feature.state = OpenLayers.State.Insert;
		                       feature.layer.drawFeature(feature);
		                   }
		                   panel.addControls(
		                       [new OpenLayers.Control.Navigation(), drawLine, drawPoint]
		                   );
		                   
		                   map.addControl(panel);
		                   map.addControl(new OpenLayers.Control.LayerSwitcher());
		           
 		           map.zoomTo(7);
// 		           console.log(map.getCenter());
// 		           console.log(map.getZoom());	
// 		            map.addControl(new OpenLayers.Control.LayerSwitcher());
		            
		          

		           
		}
    
   
    	
      
   
    
    </script>
  </head>
   <body onload="init()">
    <h2>My Map</h2>
    <a href="#" onclick="map.layers[2].commit();return false">Save Calles</a><br />
    <a href="#" onclick="map.layers[3].commit();return false">Save Puntos</a>
    <div id="map" class="map"></div>
    
  </body>
</html>